---
- name: Configure LibreWolf repository for Fedora
  when: ansible_distribution == 'Fedora'
  block:
    - name: Add LibreWolf repository
      ansible.builtin.get_url:
        url: https://repo.librewolf.net/librewolf.repo
        dest: /etc/yum.repos.d/librewolf.repo
        mode: '0644'
        owner: root
        group: root

    - name: Install LibreWolf
      ansible.builtin.dnf:
        name: librewolf
        state: present

- name: Configure LibreWolf repository for Ubuntu
  when: ansible_distribution == 'Ubuntu'
  block:
    - name: Install extrepo
      ansible.builtin.apt:
        name: extrepo
        state: present
        update_cache: true

    - name: Enable LibreWolf repository with extrepo
      ansible.builtin.command:
        cmd: extrepo enable librewolf
        creates: /etc/apt/sources.list.d/extrepo_librewolf.sources

    - name: Update apt cache
      ansible.builtin.apt:
        update_cache: true

    - name: Install LibreWolf
      ansible.builtin.apt:
        name: librewolf
        state: present
